const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Toggle-bWFGkgHk.js","assets/keyboard-spline-B0RdMMA5.js"])))=>i.map(i=>d[i]);
import{$ as u,a as $,g as K,b as W,c as A,d as R,o as C,e as T,i as p,f as B,h as f,S as k,j as P,t as d,l as N,_ as E,r as F}from"./keyboard-spline-B0RdMMA5.js";import{W as q}from"./audio-engine-QnhPrbqL.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();const _=Symbol("store-raw"),y=Symbol("store-node"),a=Symbol("store-has"),D=Symbol("store-self");function j(e){let t=e[u];if(!t&&(Object.defineProperty(e,u,{value:t=new Proxy(e,x)}),!Array.isArray(e))){const n=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let r=0,o=n.length;r<o;r++){const s=n[r];i[s].get&&Object.defineProperty(e,s,{enumerable:i[s].enumerable,get:i[s].get.bind(t)})}}return t}function b(e){let t;return e!=null&&typeof e=="object"&&(e[u]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function w(e,t=new Set){let n,i,r,o;if(n=e!=null&&e[_])return n;if(!b(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let s=0,c=e.length;s<c;s++)r=e[s],(i=w(r,t))!==r&&(e[s]=i)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const s=Object.keys(e),c=Object.getOwnPropertyDescriptors(e);for(let l=0,S=s.length;l<S;l++)o=s[l],!c[o].get&&(r=e[o],(i=w(r,t))!==r&&(e[o]=i))}return e}function h(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function m(e,t,n){if(e[t])return e[t];const[i,r]=A(n,{equals:!1,internal:!0});return i.$=r,e[t]=i}function V(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===u||t===y||(delete n.value,delete n.writable,n.get=()=>e[u][t]),n}function M(e){K()&&m(h(e,y),D)()}function Y(e){return M(e),Reflect.ownKeys(e)}const x={get(e,t,n){if(t===_)return e;if(t===u)return n;if(t===$)return M(e),n;const i=h(e,y),r=i[t];let o=r?r():e[t];if(t===y||t===a||t==="__proto__")return o;if(!r){const s=Object.getOwnPropertyDescriptor(e,t);K()&&(typeof o!="function"||e.hasOwnProperty(t))&&!(s&&s.get)&&(o=m(i,t,o)())}return b(o)?j(o):o},has(e,t){return t===_||t===u||t===$||t===y||t===a||t==="__proto__"?!0:(K()&&m(h(e,a),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Y,getOwnPropertyDescriptor:V};function O(e,t,n,i=!1){if(!i&&e[t]===n)return;const r=e[t],o=e.length;n===void 0?(delete e[t],e[a]&&e[a][t]&&r!==void 0&&e[a][t].$()):(e[t]=n,e[a]&&e[a][t]&&r===void 0&&e[a][t].$());let s=h(e,y),c;if((c=m(s,t,r))&&c.$(()=>n),Array.isArray(e)&&e.length!==o){for(let l=e.length;l<o;l++)(c=s[l])&&c.$();(c=m(s,"length",o))&&c.$(e.length)}(c=s[D])&&c.$()}function z(e,t){const n=Object.keys(t);for(let i=0;i<n.length;i+=1){const r=n[i];O(e,r,t[r])}}function H(e,t){if(typeof t=="function"&&(t=t(e)),t=w(t),Array.isArray(t)){if(e===t)return;let n=0,i=t.length;for(;n<i;n++){const r=t[n];e[n]!==r&&O(e,n,r)}O(e,"length",i)}else z(e,t)}function g(e,t,n=[]){let i,r=e;if(t.length>1){i=t.shift();const s=typeof i,c=Array.isArray(e);if(Array.isArray(i)){for(let l=0;l<i.length;l++)g(e,[i[l]].concat(t),n);return}else if(c&&s==="function"){for(let l=0;l<e.length;l++)i(e[l],l)&&g(e,[l].concat(t),n);return}else if(c&&s==="object"){const{from:l=0,to:S=e.length-1,by:I=1}=i;for(let v=l;v<=S;v+=I)g(e,[v].concat(t),n);return}else if(t.length>1){g(e[i],t,[i].concat(n));return}r=e[i],n=[i].concat(n)}let o=t[0];typeof o=="function"&&(o=o(r,n),o===r)||i===void 0&&o==null||(o=w(o),i===void 0||b(r)&&b(o)&&!Array.isArray(o)?z(r,o):O(e,i,o))}function U(...[e,t]){const n=w(e||{}),i=Array.isArray(n),r=j(n);function o(...s){W(()=>{i&&s.length===1?H(n,s[0]):g(n,s)})}return[r,o]}const X=e=>{const[t,n]=U({isInitialized:!1,activeNotes:new Set,instrumentMode:"single-sample"});return[t,{initialize:async()=>{await e.initialize(),n("isInitialized",!0)},toggleSamplerMode:()=>{const i=t.instrumentMode==="multi-sample"?"single-sample":"multi-sample";n("instrumentMode",i),e.setSamplerMode(i)},playNote:i=>{e.playNote(i),n("activeNotes",r=>new Set(r).add(i))},stopNote:i=>{e.stopNote(i),n("activeNotes",r=>{const o=new Set(r);return o.delete(i),o})}}]},L={KeyZ:48,KeyS:49,KeyX:50,KeyD:51,KeyC:52,KeyV:53,KeyG:54,KeyB:55,KeyH:56,KeyN:57,KeyJ:58,KeyM:59,Comma:60,KeyL:61,Period:62,Semicolon:63,Slash:64,KeyQ:60,Digit2:61,KeyW:62,Digit3:63,KeyE:64,KeyR:65,Digit5:66,KeyT:67,Digit6:68,KeyY:69,Digit7:70,KeyU:71,KeyI:72,Digit9:73,KeyO:74,Digit0:75,KeyP:76,BracketLeft:77,Equal:78,BracketRight:79},G=e=>{const t=i=>{if(i.repeat)return;const r=L[i.code];r&&e.onNoteOn(r,100)},n=i=>{const r=L[i.code];r&&e.onNoteOff(r)};return R(()=>{window.addEventListener("keydown",t),window.addEventListener("keyup",n),C(()=>{window.removeEventListener("keydown",t),window.removeEventListener("keyup",n)})}),null};var J=d("<div id=keyboardWrapper>"),Q=d('<div class="mt-4 font-mono text-sm opacity-75">Active Notes: '),Z=d('<div class="min-h-screen bg-gray-900 text-white p-4 flex flex-col justify-center items-center">'),ee=d('<div class="fixed top-0 w-full bg-yellow-600 text-white text-center py-2">You are currently offline. Some features may be limited.'),te=d('<div class=animate-pulse><span class="inline-block px-4 py-2 bg-gray-800 rounded">Initializing...'),ne=d('<div class="w-full h-64 bg-gray-800 animate-pulse rounded-lg">'),re=d('<div class="mt-4 w-24 h-8 bg-gray-800 animate-pulse rounded">');const ie=N(()=>E(()=>import("./keyboard-spline-B0RdMMA5.js").then(e=>e.K),[])),oe=N(()=>E(()=>import("./Toggle-bWFGkgHk.js"),__vite__mapDeps([0,1]))),se=()=>{const[e,t]=A(!1),[n,i]=A(!1),r=new q,[o,s]=X(r);return T(()=>(t(!navigator.onLine),s.initialize(),window.addEventListener("online",()=>t(!1)),window.addEventListener("offline",()=>t(!0)),()=>{window.removeEventListener("online",()=>t(!1)),window.removeEventListener("offline",()=>t(!0))})),(()=>{var c=Z();return p(c,(()=>{var l=B(()=>!!e());return()=>l()&&ee()})(),null),p(c,f(P,{get when(){return o.isInitialized},get fallback(){return te()},get children(){return[f(G,{get onNoteOn(){return s.playNote},get onNoteOff(){return s.stopNote}}),f(k,{get fallback(){return ne()},get children(){var l=J();return p(l,f(ie,{onLoad:()=>i(!0)})),l}}),f(k,{get fallback(){return re()},get children(){return f(oe,{get mode(){return o.instrumentMode},get onClick(){return s.toggleSamplerMode},class:"mt-4"})}}),f(P,{get when(){return n()},get children(){var l=Q();return l.firstChild,p(l,()=>Array.from(o.activeNotes).join(", "),null),l}})]}}),null),c})()},le=document.getElementById("root");F(()=>f(se,{}),le);"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("ServiceWorker registration successful")}).catch(e=>{console.log("ServiceWorker registration failed: ",e)})});
//# sourceMappingURL=index-BWfcGgt3.js.map
